var pwlog=void 0,pwerror=void 0;function isStringEmpty(e){return!e||0===e.length}function humanReadableFormType(e){switch(e){case WBSAutoFillFormTypeUndetermined:return"Undetermined";case WBSAutoFillFormTypeAutoFillableStandard:return"AutoFillable:Standard";case WBSAutoFillFormTypeNonAutoFillable:return"NonAutoFillable";case WBSAutoFillFormTypeAutoFillableLogin:return"AutoFillable:Login";case WBSAutoFillFormTypeNewAccount:return"NewAccount";case WBSAutoFillFormTypeChangePassword:return"ChangePassword";case WBSAutoFillFormTypeFoundTOTPURI:return"FoundTOTPUri"}return"Unrecognized"}function domainsForDisplayFromUsernamesAndDomains(e,t){const n=e.length;let o=t.map((function(e){return e.replace(/^(www|m)\./,"")})),i=[];for(var r=0;r<n;r++)i.push([e[r],o[r]]);for(r=0;r<n;r++){let e=[];for(var s=r+1;s<n;s++)i[r].join("\n")===i[s].join("\n")&&(e.length||e.push(r),e.push(s));for(identicalIndex of e)o[identicalIndex]=t[identicalIndex]}return o}function urlIsBrowserURL(e){const t=e.protocol;return"chrome:"===t||"edge:"===t||"about:"==t}function capabilitiesDeclaresMacOS(e){try{return"macos"===e.operatingSystem.name}catch{return!1}}class Localizer{static configureDocumentElementForLanguage(e,t){switch(t){case"he":case"ar":case"fa":e.setAttribute("dir","rtl"),e.setAttribute("lang",t)}}#e={};constructor(e){e&&(this.#e=e.operatingSystem)}getMessage(e,t,n){const o=this.messageNamesToTry(e);for(let e of o){let o;try{o=chrome.i18n.getMessage(e,t,n)}catch{o=chrome.i18n.getMessage(e,t)}if(o)return o}return""}messageNamesToTry(e){let t=[];const n=this.#e,o=n?n.name:void 0,i=n?n.majorVersion:void 0,r=n?n.minorVersion:void 0,s=void 0!==i;return o&&s&&void 0!==r&&t.push(`${e}_${o}_${i}_${r}`),o&&s&&t.push(`${e}_${o}_${i}`),o?t.push(`${e}_${o}`):t.push(`${e}_${this.#t}`),t.push(e),t}get#t(){return navigator.platform.startsWith("Mac")?"macos":"windows"}}class ExtensionSettings{#n=!1;#o=!0;#i=!0;eventTarget=new EventTarget;constructor(e=!1){this.#n=e,this.#r(),this.#s()}get enableInPageAutoFill(){return this.#o}set enableInPageAutoFill(e){this.#o=e,this.#l()}get allowExtensionToControlAutoFillSettings(){return this.#i}set allowExtensionToControlAutoFillSettings(e){this.#i=e,this.#a().then(this.#l.bind(this))}#a(){return this.#i?this.attemptToControlBrowserAutoFillSettings():this.clearControlOfBrowserAutoFillSettings()}attemptToControlBrowserAutoFillSettings(){return this.#n?Promise.reject(new Error("This Settings instance does not allow writing browser settings")):Promise.allSettled([this.#g(chrome.privacy.services.passwordSavingEnabled,!1),this.#g(chrome.privacy.services.autofillCreditCardEnabled,!1),this.#g(chrome.privacy.services.autofillAddressEnabled,!1)]).then((e=>(this.#c(),e)))}clearControlOfBrowserAutoFillSettings(){return this.#n?Promise.reject(new Error("This Settings instance does not allow writing browser settings")):Promise.allSettled([this.#u(chrome.privacy.services.passwordSavingEnabled),this.#u(chrome.privacy.services.autofillCreditCardEnabled),this.#u(chrome.privacy.services.autofillAddressEnabled)]).then((e=>(this.#c(),e)))}#r(){let e=new Promise((e=>{chrome.storage.sync.get({enableInPageAutoFill:!0,allowExtensionToControlAutoFillSettings:!0},(t=>{this.#o=t.enableInPageAutoFill,this.#i=t.allowExtensionToControlAutoFillSettings,e()}))}));return this.#n||(e=e.then(this.#a.bind(this))),e.then(this.#c.bind(this))}#l(){return new Promise((e=>{chrome.storage.sync.set({enableInPageAutoFill:this.#o,allowExtensionToControlAutoFillSettings:this.#i},(()=>{e()}))})).then(this.#c.bind(this))}#s(){this.#n||(chrome.privacy.services.passwordSavingEnabled&&chrome.privacy.services.passwordSavingEnabled.onChange.addListener((e=>{this.#c()})),chrome.privacy.services.autofillCreditCardEnabled&&chrome.privacy.services.autofillCreditCardEnabled.onChange.addListener((e=>{this.#c()})),chrome.privacy.services.autofillAddressEnabled&&chrome.privacy.services.autofillAddressEnabled.onChange.addListener((e=>{this.#c()})))}#c(){const e=new CustomEvent("settingsChanged",{detail:{enableInPageAutoFill:this.#o}});this.eventTarget.dispatchEvent(e)}#g(e,t){return this.#d(e).then((n=>n?n.value===t?{details:n,newValue:t}:new Promise(((o,i)=>{e.set({value:t},(()=>{chrome.runtime.lastError&&(chrome.runtime.lastError,chrome.runtime.lastError,i(chrome.runtime.lastError)),o({details:n,newValue:t})}))})):{details:{},newValue:void 0})).catch((e=>{}))}#d(e){return new Promise((t=>{e||t({}),e.get({},(e=>{"not_controllable"===e.levelOfControl&&reject(new Error("Cannot control this setting")),t(e)}))}))}#u(e){return new Promise((t=>{e||t(),e.clear({},(()=>{t()}))}))}}let extensionSettings=new ExtensionSettings;function localizeSettingsPage(){document.title=chrome.i18n.getMessage("optionsTitle"),document.querySelectorAll(".localizedElement").forEach((e=>{const t=e.dataset.localizedMessage;if(!t)return;const n=chrome.i18n.getMessage(t);e.innerHTML=n}))}window.addEventListener("DOMContentLoaded",(e=>{Localizer.configureDocumentElementForLanguage(document.documentElement,chrome.i18n.getUILanguage()),localizeSettingsPage();const setUpCheckbox=(e,t,n)=>{const o=document.getElementById(e);o.checked=t,o.addEventListener("change",(e=>{const t=e.target.checked;n(t)}))};setUpCheckbox("enable-inpage-autofill-checkbox",extensionSettings.enableInPageAutoFill,(e=>{extensionSettings.enableInPageAutoFill=e})),setUpCheckbox("allow-extention-to-control-autofill-checkbox",extensionSettings.allowExtensionToControlAutoFillSettings,(e=>{extensionSettings.allowExtensionToControlAutoFillSettings=e})),extensionSettings.eventTarget.addEventListener("settingsChanged",(e=>{const t=e.detail;void 0!==t.enableInPageAutoFill&&(document.getElementById("enable-inpage-autofill-checkbox").checked=t.enableInPageAutoFill),void 0!==t.allowExtensionToControlAutoFillSettings&&(document.getElementById("allow-extention-to-control-autofill-checkbox").checked=t.allowExtensionToControlAutoFillSettings)}))}));